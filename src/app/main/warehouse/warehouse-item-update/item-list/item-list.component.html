<div id="product" class="page-layout" style="height: 100%">
    <!-- TOP BACKGROUND -->
    
    <!-- / TOP BACKGROUND -->

    <!-- CENTER -->
    <div class="center " style="padding: 0; flex-direction: column; height: 100%; display: flex;">
        <div class="header accent p24" style="padding: 0 70px"  fxLayout="column" fxLayoutAlign="center left">
            
            <div class="breadcrumb text-truncate h1  p24" style="flex-shrink: 0"
                 [@animate]="{value:'*',params:{x:'50px'}}">
                <div fxLayout="row" fxLayoutAlign="start center">
                    <h1>Item Update</h1>
                </div>
            </div>
            <div style="height: 30px;"></div>
            <div style="display: flex;">
                <div class="search-wrapper" style="overflow: auto; display: flex; flex: 6;">
                    <div class="search" fxLayout="row" fxLayoutAlign="start center" style="flex: 6">
                        <mat-icon class="secondary-text" style="color: #444 !important;">search</mat-icon>
                        <input [(ngModel)]="searchTerm" placeholder="Search Item" fxFlex>
                    </div>
                </div>
                <div style="flex: 1">
                    <button mat-fab style="background-color: #fff; color: #444;" (click)="applyFilter(searchTerm)">
                        <!-- <mat-icon class="secondary-text">info</mat-icon> -->
                        FIND
                    </button>
                </div>
            </div>
            
        </div>
    
    <div *ngIf="isLoading" style="flex-grow: 1; display: flex; justify-content: center; align-items: center;">
        <mat-spinner [@animate]="{value:'*',params:{delay:'400ms', y:'225px'}}"></mat-spinner>
    </div>
    

    <mat-table *ngIf="!isLoading
                    && dataSource?.filteredData.length !== dataSource?.data.length
                    && dataSource?.filteredData.length !== 0"
                    style="flex-grow: 1; overflow: auto;"
                    #table [dataSource]="dataSource" [@animateStagger]="{value:'50'}" matSort>

        <!-- Type Column -->
        <ng-container matColumnDef="ImagePath">
            <mat-header-cell *matHeaderCellDef fxFlex="64px"></mat-header-cell>
            <mat-cell *matCellDef="let row" fxFlex="64px">
                <img *ngIf="row.ImagePath" src="{{fileURL}}{{row.ImagePath}}">
            </mat-cell>
        </ng-container>

        <!-- Name Column -->
        <ng-container matColumnDef="ItemName">
            <mat-header-cell *matHeaderCellDef>Name</mat-header-cell>
            <mat-cell *matCellDef="let row" width="40%"> {{row.ItemName}}</mat-cell>
        </ng-container>

        <!-- Type Column -->
        <ng-container matColumnDef="TPIN">
            <mat-header-cell *matHeaderCellDef fxHide fxShow.gt-md>TPIN</mat-header-cell>
            <mat-cell *matCellDef="let row" fxHide fxShow.gt-md width="20%"> {{row.TPIN}}</mat-cell>
        </ng-container>

        <!-- Owner Column -->
        <ng-container matColumnDef="VendorSKU">
            <mat-header-cell *matHeaderCellDef fxHide.xs>Vendor SKU</mat-header-cell>
            <mat-cell *matCellDef="let row" fxHide.xs width="20%"> {{row.VendorSKU}}</mat-cell>
        </ng-container>

        <!-- Size Column -->
        <ng-container matColumnDef="FOBPrice">
            <mat-header-cell *matHeaderCellDef fxHide.xs>FOB Price</mat-header-cell>
            <mat-cell *matCellDef="let row" fxHide.xs width="20%">{{row.FOBPrice}}</mat-cell>
        </ng-container>

        <!-- Modified Column -->
        <ng-container matColumnDef="Description">
            <mat-header-cell *matHeaderCellDef fxHide fxShow.gt-md>Description</mat-header-cell>
            <mat-cell *matCellDef="let row" fxHide fxShow.gt-md>{{row.Description}}</mat-cell>
        </ng-container>

        <!-- Modified Column -->
        <ng-container matColumnDef="Actions">
            <mat-header-cell *matHeaderCellDef>Actions</mat-header-cell>
            <mat-cell *matCellDef="let row" >
                <button matTooltip="Edit Dimensions" mat-icon-button (click)="composeDialog()">
                    <mat-icon>build</mat-icon>
                </button>
            </mat-cell>
        </ng-container>

        <!-- Detail Button Column -->
        <ng-container matColumnDef="detail-button">
            <mat-header-cell *matHeaderCellDef fxFlex="48px" fxHide.gt-md></mat-header-cell>
            <mat-cell *matCellDef="let row" fxFlex="48px" fxHide.gt-md>
                <button mat-icon-button class="sidebar-toggle" fxHide.gt-md
                        (click)="toggleSidebar('file-manager-details-sidebar')">
                    <mat-icon class="secondary-text">info</mat-icon>
                </button>
            </mat-cell>
        </ng-container>

        <mat-header-row style="flex-grow: 0;" *matHeaderRowDef="displayedColumns; sticky: true"></mat-header-row>
        <mat-row *matRowDef="let row; columns: displayedColumns;"
                (click)="onSelect(row)"
                [ngClass]="{'selected' : row == selected}"
                [@animate]="{value:'*',params:{y:'100%'}}"
        >
        </mat-row>
    </mat-table>


    <div *ngIf="!isLoading && dataSource?.filteredData.length === dataSource?.data.length"
        [@animate]="{value:'*',params:{delay:'400ms', y:'225px'}}"
        style="flex-grow: 1; display: flex; justify-content: center; align-items: center;">
        Please search for an item.
    </div>
    <div *ngIf="!isLoading && dataSource?.filteredData.length === 0"
        [@animate]="{value:'*',params:{delay:'400ms', y:'225px'}}"
        style="flex-grow: 1; display: flex; justify-content: center; align-items: center;">
        No items found.
    </div>
    <mat-paginator #paginator [pageSizeOptions]="[10, 20, 50, 100, 200]" [showFirstLastButtons]="true"></mat-paginator>
    </div>
</div>
